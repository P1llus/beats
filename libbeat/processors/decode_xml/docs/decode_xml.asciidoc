[[decode_xml]]
=== Decode XML

++++
<titleabbrev>decode_xml</titleabbrev>
++++

experimental[]

The `decode_xml` processor decodes any valid XML data that is stored under the `fields` key,
It will output the values as an array of strings.

Example that shows how to define which fields include the XML data and allows to overwrite the fields
if they already exists:

[source,yaml]
-------
processors:
  - decode_xml:
      fields: ["field1", "field2"]
      overwrite_keys: true
      target: ""
-------

If you want any potential errors to appear in the resulting document or want the automatically generated document ID to be overwritten by 
 by a field that exists in the XML object an example like the below can be used:

[source,yaml]
-------
processors:
  - decode_xml:
      fields: ["field1""]
      add_error_key: true
      target: "xml"
      document_id: "fieldwithid"
-------

By default all keys converted from XML will have the names converted to lowercase. If there is a need to disable this behavior it is possible to use
the below example:

[source,yaml]
-------
processors:
  - decode_xml:
      fields: ["field1""]
      to_lower: false
      document_id: "fieldwithid"
-------

Example XML input:

[source,xml]
-------------------------------------------------------------------------------
{
  <catalog>
    <book seq="1">
      <author>William H. Gaddis</author>
      <title>The Recognitions</title>
      <review>One of the great seminal American novels of the 20th century.</review>
    </book>
  </catalog>
}
-------------------------------------------------------------------------------

Will produce the following output:

[source,json]
-------------------------------------------------------------------------------
{
	"xml": {
		"catalog": {
			"book": {
				"author": "William H. Gaddis",
				"review": "One of the great seminal American novels of the 20th century.",
				"seq": "1",
				"title": "The Recognitions"
			}
		}
	}
}
-------------------------------------------------------------------------------


In the examples above:

`target`:: (Optional) The field under which the decoded XML will be written. By
default the decoded XML object replaces the string field from which it was
read. To merge the decoded XML fields into the root of the event, specify
`target` with an empty string (`target: ""`). Note that the `null` value (`target:`)
is treated as if the field was not set at all.

`overwrite_keys`:: (Optional) A boolean that specifies whether keys that already
exist in the event are overwritten by keys from the decoded XML object. The
default value is false.

`add_error_key`:: (Optional) If it set to true, in case of error while decoding XML objects
te `error` field is going to be part of event with error message. If it set to false, there
will not be any error in event's field. Even error occurs while decoding XML objects. The
default value is false.

`to_lower`:: (Optional) Converts all key fields to lower case. Accepts either true or false.
The default value is true.

`document_id`:: (Optional) XML key to use as the document id. If configured,
the field will be removed from the original XML document and stored in
`@metadata._id`

See <<conditions>> for a list of supported conditions.


